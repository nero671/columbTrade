"use strict";
var app = {
  pathToLibsFiles: "./assets/libs"
};
window.app = app, [Element.prototype, CharacterData.prototype, DocumentType.prototype].forEach(function (item) {
  item.hasOwnProperty("before") || Object.defineProperty(item, "before", {
    configurable: !0,
    enumerable: !0,
    writable: !0,
    value: function () {
      var argArr = Array.prototype.slice.call(arguments),
        docFrag = document.createDocumentFragment();
      argArr.forEach(function (argItem) {
        var isNode = argItem instanceof Node;
        docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)))
      }), this.parentNode.insertBefore(docFrag, this)
    }
  })
}), window.NodeList && !NodeList.prototype.forEach && (NodeList.prototype.forEach = function (callback, thisArg) {
  thisArg = thisArg || window;
  for (var i = 0; i < this.length; i++) callback.call(thisArg, this[i], i, this)
}), app.benefitTabs = {
  init: function () {
    var navItems = document.querySelectorAll(".benefit-tabs__nav-item"),
      tabsContent = document.querySelectorAll(".benefit-tabs__item");
    navItems.length && navItems.forEach(function (navItem) {
      navItem.addEventListener("click", function () {
        document.querySelector(".benefit-tabs__nav-item.active").classList.remove("active"), navItem.classList.add("active"), tabsContent.forEach(function (tabContent) {
          tabContent.dataset.tabContent === navItem.dataset.tab ? tabContent.classList.add("show") : tabContent.classList.remove("show")
        })
      })
    })
  }
}, app.burgerMenu = {
  init: function () {
    var burger = document.querySelector(".js-burger"),
      burgerMenu = document.querySelector(".js-burger-menu"),
      header = document.querySelector(".header");
    burger && burger.addEventListener("click", function () {
      burgerMenu.classList.toggle("active"), burger.classList.toggle("active"), header.classList.toggle("active"), document.body.classList.toggle("no-scroll"), document.documentElement.classList.toggle("no-scroll")
    })
  }
}, app.contactsAcc = {
  init: function () {
    function toggle(item) {
      item.classList.toggle("is-active");
      item = item.querySelector(".contacts-acc__hidden-list");
      item.style.maxHeight ? (item.style.maxHeight = null, item.style.marginTop = null) : (item.style.maxHeight = "".concat(item.scrollHeight, "px"), item.style.marginTop = "2rem")
    }(items = document.querySelectorAll(".contacts-acc__item")).length && ((items = items[1]).classList.add("is-active"), (items = items.querySelector(".contacts-acc__hidden-list")).style.maxHeight = "".concat(items.scrollHeight, "px"), items.style.marginTop = "2rem");
    var items = document.querySelectorAll(".contacts-acc__btn");
    items.length && items.forEach(function (accBtn) {
      accBtn.addEventListener("click", function () {
        var parent = accBtn.closest(".contacts-acc__item"),
          activeParent = document.querySelector(".contacts-acc__item.is-active");
        activeParent && activeParent !== parent && toggle(activeParent), toggle(parent)
      })
    })
  }
}, app.closePromoForm = {
  init: function () {
    var closePromoFormBtn = document.querySelector(".form--promo .form__close-btn");
    closePromoFormBtn && closePromoFormBtn.addEventListener("click", function () {
      closePromoFormBtn.closest("form").style.display = "none", document.querySelector(".why").classList.add("padding")
    })
  }
}, app.header = {
  init: function () {
    var header = document.querySelector(".js-header");
    header && window.addEventListener("scroll", function () {
      window.pageYOffset > document.querySelector(".promo").offsetHeight ? header.classList.add("fixed") : header.classList.remove("fixed")
    })
  }
}, app.ourTeamSlider = {
  init: function () {
    var ourTeamSlider = document.querySelector(".js-our-team-slider");
    ourTeamSlider && new Swiper(ourTeamSlider, {
      grabCursor: !0,
      pagination: {
        el: ".swiper-pagination",
        dynamicBullets: !0,
        clickable: !0
      },
      slidesPerView: 1,
      spaceBetween: 40,
      loop: !0,
      breakpoints: {
        768: {
          slidesPerView: 2,
          spaceBetween: 40
        },
        1025: {
          slidesPerView: 3,
          spaceBetween: 40
        }
      }
    })
  }
}, app.popups = {
  init: function () {
    var popup, popupBtns = document.querySelectorAll(".js-popup-btn");
    popupBtns.length && (popup = document.querySelector(".popup").querySelector(".popup__wrap"), popupBtns.forEach(function (popupBtn) {
      popupBtn.addEventListener("click", function () {
        Swal.fire({
          showConfirmButton: !1,
          html: popup,
          width: "37.4rem",
          didOpen: function () {
            return popup.querySelector(".form__input").blur()
          }
        })
      })
    }))
  }
}, app.promoSlider = {
  init: function () {
    var promoSlider = document.querySelector(".js-promo-slider");
    promoSlider && new Swiper(promoSlider, {
      grabCursor: !0,
      pagination: {
        el: ".swiper-pagination",
        clickable: !0,
        dynamicBullets: !0
      },
      loop: !0
    })
  }
}, app.fiveSecretsTabs = {
  init: function () {
    var mql, navItems = document.querySelectorAll(".secrets-tabs__list-item"),
      tabsContent = document.querySelectorAll(".secrets-tabs__content"),
      tabsImages = document.querySelectorAll(".secrets-tabs__img-block");
    navItems.length && ((mql = window.matchMedia("(min-width: 501px)")).onchange = function () {
      mql.matches ? (navItems.forEach(function (navItem) {
        navItem.addEventListener("click", function () {
          document.querySelector(".secrets-tabs__list-item.active").classList.remove("active"), navItem.classList.add("active"), tabsContent.forEach(function (tabContent) {
            tabContent.dataset.tabContent === navItem.dataset.tab ? tabContent.classList.add("show") : tabContent.classList.remove("show"), 4 == navItem.dataset.tab || 5 == navItem.dataset.tab ? (tabContent.classList.add("blur"), document.querySelector(".five-secrets__btn").classList.add("active")) : (tabContent.classList.remove("blur"), document.querySelector(".five-secrets__btn").classList.remove("active"))
          })
        })
      }), navItems.forEach(function (navItem) {
        navItem.addEventListener("click", function () {
          document.querySelector(".secrets-tabs__list-item.active").classList.remove("active"), navItem.classList.add("active"), tabsImages.forEach(function (tabImg) {
            tabImg.dataset.tabImg === navItem.dataset.tab ? tabImg.classList.add("show") : tabImg.classList.remove("show"), 4 == navItem.dataset.tab || 5 == navItem.dataset.tab ? tabImg.classList.add("blur") : tabImg.classList.remove("blur")
          })
        })
      }), document.querySelector(".form--popup").addEventListener("submit", function (e) {
        document.querySelector(".blur") && (e.preventDefault(), document.querySelectorAll(".blur").forEach(function (item) {
          return item.classList.remove("blur")
        }), document.querySelector(".five-secrets__btn").classList.remove("active"), Swal.close())
      })) : document.querySelectorAll(".secrets-tabs__list-item").forEach(function (tabItem) {
        tabItem.addEventListener("click", function () {
          var active = document.querySelector(".secrets-tabs__list-text.active");
          active && tabItem !== active && active.classList.remove("active"), tabItem.nextElementSibling.classList.toggle("active")
        })
      })
    }, mql.onchange())
  }
}, app.showContent = {
  init: function () {
    var btnsBottom = document.querySelectorAll(".js-btn-bottom");
    btnsBottom.length && btnsBottom.forEach(function (btnBottom) {
      btnBottom.addEventListener("click", function () {
        btnBottom.closest(".js-block-hidden-content").classList.toggle("show-content")
      })
    })
  }
}, app.topBtn = {
  init: function () {
    var topBtn = document.querySelector(".js-top-btn");
    topBtn && (window.addEventListener("scroll", function () {
      1200 < window.pageYOffset ? topBtn.classList.add("show-btn") : topBtn.classList.remove("show-btn")
    }), topBtn.addEventListener("click", function () {
      document.body.scrollIntoView({
        behavior: "smooth"
      })
    }))
  }
}, app.video = {
  init: function () {
    var videoBlocks = document.querySelectorAll(".video");
    videoBlocks.length && videoBlocks.forEach(function (videoBlock) {
      videoBlock.addEventListener("click", function () {
        var dataAttr = videoBlock.dataset.video;
        dataAttr && Swal.fire({
          showConfirmButton: !1,
          html: '\n          <div class="popup__wrap popup__iframe-wrap">\n            <iframe class="popup__iframe" src="'.concat(dataAttr, '" title="columb video" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n            <button class="popup__close" type="button" onclick="Swal.close(); return false;">\n              <svg class="icon icon--close">\n                <use xlink:href="assets/images/sprite.svg#close"></use>\n              </svg>\n            </button>\n          </div>\n          '),
          width: "100rem"
        })
      })
    })
  }
}, app.whySliderSub = {
  init: function () {
    var whySliderSubs = document.querySelectorAll(".js-why-slider-sub");
    whySliderSubs.length && whySliderSubs.forEach(function (whySliderSub) {
      new Swiper(whySliderSub, {
        pagination: {
          el: ".swiper-pagination",
          type: "fraction"
        },
        loop: !0,
        nested: !0
      })
    })
  }
}, app.whySlider = {
  init: function () {
    var whySlider = document.querySelector(".js-why-slider");
    whySlider && new Swiper(whySlider, {
      grabCursor: !0,
      loop: !0,
      breakpoints: {
        320: {
          spaceBetween: 10,
          centeredSlides: !0,
          slidesPerView: "auto"
        },
        501: {
          slidesPerView: 2.8,
          spaceBetween: 30
        }
      }
    })
  }
}, app.whyTabs = {
  init: function () {
    var navItems = document.querySelectorAll(".why-tabs__nav-item"),
      tabsContent = document.querySelectorAll(".why-tabs__item");
    navItems.length && navItems.forEach(function (navItem) {
      navItem.addEventListener("click", function () {
        document.querySelector(".why-tabs__nav-item.active").classList.remove("active"), navItem.classList.add("active"), tabsContent.forEach(function (tabContent) {
          tabContent.dataset.tabContent === navItem.dataset.tab ? tabContent.classList.add("show") : tabContent.classList.remove("show")
        })
      })
    })
  }
}, app.advantages = {
  init: function () {
    function toggle(item) {
      item.classList.toggle("active")
    }
    var advantagesItems = document.querySelectorAll(".advantages__item");
    advantagesItems.length && advantagesItems.forEach(function (item) {
      item.addEventListener("click", function () {
        var active = document.querySelector(".advantages__item.active");
        active && active !== item && toggle(active), toggle(item)
      })
    })
  }
}, app.cabinetAcc = {
  init: function () {
    function toggle(item) {
      item.classList.toggle("is-active");
      item = item.querySelector(".cabinet__acc-hidden");
      item.style.maxHeight ? (item.style.maxHeight = null, item.style.marginTop = null) : (item.style.maxHeight = "".concat(item.scrollHeight, "px"), item.style.marginTop = "2rem")
    }
    var item, cabinetSlider, accBtns = document.querySelectorAll(".cabinet__acc-title");
    accBtns.length && ((item = document.querySelector(".cabinet__acc-item")) && (item.classList.add("is-active"), (item = item.querySelector(".cabinet__acc-hidden")).style.maxHeight = "".concat(item.scrollHeight, "px"), item.style.marginTop = "2rem"), (cabinetSlider = new Swiper(".js-cabinet-slider", {
      effect: "coverflow",
      centeredSlides: !0,
      slidesPerView: "auto",
      loop: !0,
      speed: 1e3,
      grabCursor: !0,
      coverflowEffect: {
        slideShadows: !1
      }
    })).on("transitionStart", function () {
      var activeEl, item = document.querySelectorAll(".cabinet__acc-item")[cabinetSlider.realIndex];
      item && (item.classList.contains("is-active") || ((activeEl = document.querySelector(".cabinet__acc-item.is-active")).classList.remove("is-active"), activeEl.querySelector(".cabinet__acc-hidden").style.maxHeight = null, activeEl.querySelector(".cabinet__acc-hidden").style.marginTop = null, item.classList.add("is-active"), (activeEl = item.querySelector(".cabinet__acc-hidden")).style.maxHeight = "".concat(activeEl.scrollHeight, "px"), activeEl.style.marginTop = "2rem"))
    }), accBtns.forEach(function (accBtn, index) {
      accBtn.addEventListener("click", function () {
        cabinetSlider.slideToLoop(index, 1e3)
      })
    }), window.matchMedia("(max-width: 768px)").matches && accBtns.forEach(function (accBtn) {
      accBtn.addEventListener("click", function () {
        var parent = accBtn.closest(".cabinet__acc-item"),
          activeParent = document.querySelector(".cabinet__acc-item.is-active");
        activeParent && activeParent !== parent && toggle(activeParent), toggle(parent)
      })
    }))
  }
}, app.confidenceSlider = {
  init: function () {
    var carImages, contents;
    document.querySelector(".confidence__slider") && (carImages = document.querySelectorAll(".confidence__images-item"), contents = document.querySelectorAll(".confidence__content"), new Swiper(".js-confidence-slider", {
      navigation: {
        nextEl: ".swiper-button-next"
      },
      breakpoints: {
        320: {
          slidesPerView: "auto",
          centeredSlides: !0
        },
        768: {
          slidesPerView: 5
        },
        1025: {
          slidesPerView: 10.05
        }
      },
      spaceBetween: 20,
      slideToClickedSlide: !0,
      loop: !0
    }).on("slideChange", function (swiper) {
      document.querySelector(".confidence__images-item.active").classList.remove("active"), document.querySelector(".confidence__content.active").classList.remove("active"), carImages[swiper.realIndex].classList.add("active"), contents[swiper.realIndex].classList.add("active");
      var activeSlide = swiper.slides[swiper.activeIndex],
        activeSlideJpgImgAtrr = activeSlide.querySelector("img").getAttribute("data-src"),
        activeSlide = activeSlide.querySelector("source").getAttribute("data-srcset"),
        swiper = carImages[swiper.realIndex].querySelector(".confidence__img-person-wrap");
      swiper.querySelector("img").setAttribute("src", activeSlideJpgImgAtrr), swiper.querySelector("source").setAttribute("srcset", activeSlide)
    }))
  }
}, app.interactiveMap = {
  init: function () {
    var harbourSlider, activeCircle, tooltip, query, interactiveMap = document.querySelector(".harbour__map");
    interactiveMap && (activeCircle = interactiveMap.querySelector('circle[data-circle="California"]'), tooltip = document.querySelector(".js-harbour-tooltip"), Popper.createPopper(activeCircle, tooltip, {
      placement: "top",
      modifiers: [{
        name: "offset",
        options: {
          offset: [0, 15]
        }
      }, {
        name: "flip",
        enabled: !1
      }]
    }), interactiveMap.querySelectorAll("[data-place]").forEach(function (path) {
      path.addEventListener("click", function () {
        interactiveMap.querySelector('[fill="var(--orange)"]') && (interactiveMap.querySelector('[fill="var(--orange)"]').setAttribute("fill", "var(--gray8)"), document.querySelector(".harbour__info-item.show").classList.remove("show"), document.querySelectorAll(".active-circle").forEach(function (circle) {
          return circle.classList.remove("active-circle")
        }));
        var contents = document.querySelectorAll(".harbour__info-item");
        window.matchMedia("(max-width: 500px)").matches && harbourSlider.slideTo(path.dataset.index - 1), contents.forEach(function (content) {
          content.dataset.place === path.dataset.place && interactiveMap.querySelectorAll("[data-circle]").forEach(function (circle) {
            circle.dataset.circle === content.dataset.place && (path.setAttribute("fill", "var(--orange)"), tooltip.querySelector(".harbour__tooltip-text").textContent = path.dataset.place, Popper.createPopper(circle, tooltip, {
              placement: "top",
              modifiers: [{
                name: "offset",
                options: {
                  offset: [0, 15]
                }
              }, {
                name: "flip",
                enabled: !1
              }]
            }), content.classList.add("show"), circle.classList.add("active-circle"))
          })
        })
      })
    }), (query = window.matchMedia("(max-width: 500px)")).onchange = function () {
      query.matches ? harbourSlider = new Swiper(".js-harbour-slider", {
        pagination: {
          el: ".swiper-pagination",
          clickable: !0
        },
        spaceBetween: 30,
        on: {
          slideChange: function (swiper) {
            interactiveMap.querySelector('[fill="var(--orange)"]') && (interactiveMap.querySelector('[fill="var(--orange)"]').setAttribute("fill", "var(--gray8)"), document.querySelectorAll(".active-circle").forEach(function (circle) {
              return circle.classList.remove("active-circle")
            }));
            var path = interactiveMap.querySelector('[data-index="'.concat(swiper.realIndex + 1, '"]'));
            path.setAttribute("fill", "var(--orange)"), tooltip.querySelector(".harbour__tooltip-text").textContent = path.dataset.place, interactiveMap.querySelectorAll("[data-circle]").forEach(function (circle) {
              circle.dataset.circle === path.dataset.place && (Popper.createPopper(circle, tooltip, {
                placement: "top",
                modifiers: [{
                  name: "offset",
                  options: {
                    offset: [0, 15]
                  }
                }]
              }), circle.classList.add("active-circle"))
            })
          }
        }
      }) : harbourSlider && harbourSlider.destroy()
    }, query.onchange())
  }
}, app.howItWork = {
  init: function () {
    var howItWorkSlider = new Swiper(".how-it-work__slider--desktop", {
        slidesPerView: 3,
        grabCursor: !0,
        pagination: {
          el: ".how-it-work__pagination-wrap--desktop .how-it-work__pagination",
          clickable: !0,
          renderBullet: function (index, className) {
            return "<div class=".concat(className, "><span>").concat(index + 1, "</span></div>")
          }
        }
      }),
      contents = document.querySelectorAll(".how-it-work__content"),
      howItWorkSliderMobile = (howItWorkSlider.on("slideChange", function () {
        document.querySelector(".how-it-work__content.show").classList.remove("show"), contents[howItWorkSlider.realIndex].classList.add("show")
      }), new Swiper(".how-it-work__slider--mobile", {
        effect: "coverflow",
        grabCursor: !0,
        centeredSlides: !0,
        slidesPerView: "auto",
        loop: !0,
        breakpoints: {
          320: {
            coverflowEffect: {
              rotate: 50,
              slideShadows: !1,
              depth: 500
            }
          },
          767: {
            coverflowEffect: {
              rotate: 50,
              slideShadows: !1,
              depth: 300
            }
          }
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev"
        },
        pagination: {
          el: ".how-it-work__pagination-wrap--mobile .how-it-work__pagination",
          clickable: !0,
          renderBullet: function (index, className) {
            return "<div class=".concat(className, "><span>").concat(index + 1, "</span></div>")
          }
        }
      }));
    howItWorkSliderMobile.on("slideChange", function () {
      document.querySelector(".how-it-work__content.show").classList.remove("show"), contents[howItWorkSliderMobile.realIndex].classList.add("show")
    })
  }
}, app.addLibs = {
  name: "addLibs",
  description: "connect the script library dynamically",
  addScriptFile: function (nameFile, callback) {
    var body = document.getElementsByTagName("body")[0],
      script = document.createElement("script");
    script.onload = function () {
      return callback && callback()
    }, script.src = "".concat(app.pathToLibsFiles, "/js/").concat(nameFile, ".js"), body.appendChild(script)
  },
  addStyleFile: function (nameFile) {
    var appCss = document.getElementById("app-css"),
      link = document.createElement("link");
    link.rel = "stylesheet", link.href = "".concat(app.pathToLibsFiles, "/css/").concat(nameFile, ".css"), appCss.before(link)
  },
  initScript: function (nameFile, nameLib, callback) {
    var timerId, hasLibs = null;
    document.querySelectorAll("script").forEach(function (el) {
      el = el.getAttribute("src");
      el && 0 <= el.indexOf(nameFile) && (hasLibs = !0)
    }), hasLibs ? timerId = setInterval(function () {
      (window[nameLib] || window.jQuery && jQuery()[nameLib]) && (callback(), clearInterval(timerId))
    }, 1) : this.addScriptFile(nameFile, callback)
  },
  initStyle: function (nameFile) {
    var hasLibs = null;
    document.querySelectorAll("link").forEach(function (el) {
      el = el.getAttribute("src");
      el && 0 <= el.indexOf(nameFile) && (hasLibs = !0)
    }), hasLibs || this.addStyleFile(nameFile)
  }
}, document.addEventListener("DOMContentLoaded", function () {
  app.promoSlider.init(), app.topBtn.init(), app.closePromoForm.init(), app.burgerMenu.init(), app.whyTabs.init(), app.benefitTabs.init(), app.whySlider.init(), app.whySliderSub.init(), app.confidenceSlider.init(), app.ourTeamSlider.init(), app.showContent.init(), app.popups.init(), app.contactsAcc.init(), app.fiveSecretsTabs.init(), app.advantages.init(), app.video.init(), app.cabinetAcc.init(), app.interactiveMap.init(), app.howItWork.init(), $(function () {
    $(".advantages__title").matchHeight()
  })
});